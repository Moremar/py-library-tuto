{% extends 'base.html' %}

{% block content %}
<div>
    <h2 style="display:inline">All posts</h2>
    <a class="btn btn-primary float-right" style="display:inline;float:right" href="/posts/create">New Post</a>
</div>
<br />

{% for post in posts %}
    <article class="media content-section">
      <div class="media-body">
        <div class="article-metadata">
          <a class="mr-2" href="#">{{ post.author.username }}</a>
          <small class="text-muted">{{post.created_on.strftime("%m/%d/%Y")}}</small>
        </div>
        <h2><a class="article-title" href="#">{{ post.title }}</a></h2>
        <p class="article-content">{{ post.content }}</p>
      </div>
    </article>

    <div class="card" style="margin: 10px 0">
        <h5><i>TODO: remove when Edit/Delete are in new card</i></h5>
        <div class="card-body">
            <div class="card-title">
                <h5> {{ post.title }} </h5>
            </div>
            
            <div class="card-subtitle" style="color:grey">
            {% if post.author %}
                <small>posted by {{post.author}} on {{post.created_on.strftime("%m/%d/%Y")}}</small>
            {% endif %}
            </div>

            <!-- pre-wrap to preserve the new lines in the content -->
            <p class="card-text" style="white-space:pre-wrap;margin-top:10px">{{ post.content }}</p>
        </div>
        <div class="card-footer">
            <a class="btn btn-primary" style="float:right;width:80px;margin:0 10px" href="/posts/edit/{{post.id}}">Edit</a>
            <a class="btn btn-danger" style="float:right;width:80px;" href="/posts/delete/{{post.id}}">Delete</a>
        </div>
    </div>
{% endfor %}
{% endblock %}